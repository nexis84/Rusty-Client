<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rusty Bot Animation</title>
    <link rel="stylesheet" href="style.css">
    <!-- Reference to QWebChannel library -->
    <script src="qwebchannel.js"></script>
    <style>
        /* Added inline style for immediate dark background */
        body {
            background-color: #05080a; /* Match --trig-dark from style.css */
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrollbars during brief load */
        }
        /* Remove all .winner-portrait-class CSS to restore timer visuals */
        /* .winner-corp-class, .winner-alliance-class, .winner-details-container can also be removed if not used elsewhere */
        .winner-corp-class, .winner-alliance-class {
            font-size: 0.8em; /* Smaller than main winner name */
            color: #bbb;     /* A slightly lighter grey */
            line-height: 1.3;
            text-align: center;
            margin-top: 2px;
        }
        .winner-name-class { /* Style for the main winner name if needed */
            display: block; /* Ensures it takes its own line if portrait is above */
            /* Add any specific styling for the winner's name here */
        }
        .winner-details-container { /* Optional wrapper for portrait and text */
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px; /* Space between ESI info and winner name */
        }

        /* Ensure winner display containers have some padding if ESI info is inside */
        .list-winner-display,
        .triglavian-winner-display,
        .node-path-winner-display,
        .trig-conduit-winner-display,
        .trig-code-winner-name-display {
            padding-top: 10px; /* Add some space above ESI info if it's the first child */
            padding-bottom: 10px;
        }

    </style>
</head>
<body>
    <!-- Canvas for background network animation - Moved outside the main container -->
    <canvas class="background-canvas" id="background-canvas"></canvas>

    <!-- Main content container -->
    <div class="container">

        <!-- == Background Lists (Remain inside container for positioning relative to content) == -->
        <div class="background-list left-list" id="left-background-list">
            <ul id="left-bg-list-ul">
                <!-- Participant names will be added by background_lists.js -->
            </ul>
        </div>
        <div class="background-list right-list" id="right-background-list">
             <ul id="right-bg-list-ul">
                 <!-- Participant names (Triglavian font) will be added by background_lists.js -->
             </ul>
        </div>
        <!-- ============================== -->

        <!-- Container for the switchable animation modes -->
        <div class="animation-content" id="animation-content">

            <!-- == Hacking (Box) Reveal Mode == -->
            <div class="reveal-mode" id="box-reveal-mode">
                <div class="boxes-row" id="boxes-row">
                    <!-- Boxes will be generated by script.js -->
                </div>
                <div class="connection-indicators" id="connection-indicators" style="display: none;"></div>
                 <!-- Hacking mode usually doesn't have a dedicated winner display area like others.
                      If you add one, it would go here and script.js would need to target its elements.
                      However, to be safe, let's add a hidden one just in case script.js tries to target it.
                 -->
                 <div class="winner-details-container hacking-winner-display" style="display:none;">
                    <img id="hacking-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                    <span id="hacking-winner-name" class="winner-name-class"></span>
                    <div id="hacking-winner-corp" class="winner-corp-class"></div>
                    <div id="hacking-winner-alliance" class="winner-alliance-class"></div>
                </div>
            </div>
            <!-- ======================== -->

            <!-- == Vertical List Scroll Mode == -->
            <div class="reveal-mode" id="list-reveal-mode">
                 <div class="list-lights-indicator" id="list-lights-indicator">
                     <!-- Lights will be generated by script.js -->
                 </div>
                 <div class="list-scroll-container" id="list-scroll-container">
                     <div class="list-pointer"></div>
                     <ul class="entrant-list" id="entrant-list">
                         <!-- List items will be generated by script.js -->
                     </ul>
                 </div>
                 <div class="list-winner-display" id="list-winner-display">
                     <div class="winner-details-container">
                        <img id="list-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                        <div id="list-winner-corp" class="winner-corp-class"></div>
                        <div id="list-winner-alliance" class="winner-alliance-class"></div>
                    </div>
                    <span id="list-winner-name" class="winner-name-class"></span>
                 </div>
            </div>
            <!-- ========================= -->

            <!-- == Triglavian Translation Mode == -->
            <div class="reveal-mode" id="triglavian-reveal-mode">
                <div class="triglavian-boxes-row" id="triglavian-boxes-row">
                    <!-- Triglavian cycle boxes will be generated by script.js -->
                </div>
                <div class="triglavian-winner-display" id="triglavian-winner-display">
                    <div class="winner-details-container">
                        <img id="triglavian-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                        <div id="triglavian-winner-corp" class="winner-corp-class"></div>
                        <div id="triglavian-winner-alliance" class="winner-alliance-class"></div>
                    </div>
                    <span id="triglavian-winner-name" class="winner-name-class"></span>
                </div>
            </div>
            <!-- ============================= -->

            <!-- == Clean Winner Animation (Independent) == -->
            <div class="clean-winner-animation" id="clean-winner-animation">
                <div class="clean-winner-boxes" id="clean-winner-boxes">
                    <!-- Letter boxes will be generated by script.js -->
                </div>
            </div>
            <!-- ============================= -->

            <!-- == Node Path Reveal Mode == -->
            <div class="reveal-mode" id="node-path-reveal-mode">
                 <div class="node-path-grid-container" id="node-path-grid-container">
                     <!-- Grid nodes and SVG lines will be added by script.js -->
                 </div>
                 <div class="node-path-winner-display" id="node-path-winner-display">
                    <div class="winner-details-container">
                        <img id="node-path-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                        <div id="node-path-winner-corp" class="winner-corp-class"></div>
                        <div id="node-path-winner-alliance" class="winner-alliance-class"></div>
                    </div>
                    <span id="node-path-winner-name" class="winner-name-class"></span>
                 </div>
            </div>
            <!-- ======================= -->

            <!-- == Triglavian Conduit Reveal Mode == -->
            <div class="reveal-mode" id="trig-conduit-reveal-mode">
                <div class="trig-conduit-nodes-container" id="trig-conduit-nodes-container">
                    <!-- Conduit nodes will be generated by script.js -->
                </div>
                <div class="trig-conduit-winner-display" id="trig-conduit-winner-display">
                     <div class="winner-details-container">
                        <img id="trig-conduit-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                        <div id="trig-conduit-winner-corp" class="winner-corp-class"></div>
                        <div id="trig-conduit-winner-alliance" class="winner-alliance-class"></div>
                    </div>
                    <span id="trig-conduit-winner-name" class="winner-name-class"></span>
                </div>
            </div>
            <!-- ================================== -->

            <!-- == Triglavian Code Reveal Mode == -->
            <div class="reveal-mode" id="trig-code-reveal-mode">
                <div class="trig-code-winner-code-display" id="trig-code-winner-code-display">
                    <!-- Winner's code (revealed letter by letter) will appear here -->
                </div>
                <div class="trig-code-participants-container" id="trig-code-participants-container">
                    <!-- Participant names and their Triglavian codes will be listed here -->
                </div>
                <div class="trig-code-winner-name-display" id="trig-code-winner-name-display">
                     <div class="winner-details-container">
                        <img id="trig-code-winner-portrait" class="winner-portrait-class" src="#" alt="" style="display:none;"/>
                        <div id="trig-code-winner-corp" class="winner-corp-class"></div>
                        <div id="trig-code-winner-alliance" class="winner-alliance-class"></div>
                    </div>
                    <span id="trig-code-winner-name" class="winner-name-class"></span>
                </div>
            </div>
            <!-- ============================= -->

        </div> <!-- End animation-content -->


        <!-- == NEW: PRIZE REVEAL CONTAINER (Modified) == -->
        <div class="prize-reveal-container" id="prize-reveal-container" style="display: none;">
            <div class="prize-reveal-display" id="prize-reveal-display">
                <span class="prize-reveal-line" id="prize-reveal-name"></span>
                <span class="prize-reveal-line" id="prize-reveal-donator"></span>
            </div>
        </div>
        <!-- ============================================ -->


        <!-- == Shared Elements (Countdown Timer) - Remains in container for centering etc. == -->
        <div class="countdown-container" id="countdown-container">
             <svg class="countdown-svg" id="countdown-svg" viewBox="0 0 100 100">
                 <circle class="countdown-track" cx="50" cy="50" r="45"></circle>
                 <circle class="countdown-progress" id="countdown-progress" cx="50" cy="50" r="45"></circle>
             </svg>
             <div class="countdown-text" id="countdown-text">30</div>
        </div>
        <!-- ====================================== -->

    </div> <!-- End container -->

    <!-- Background Scripts (Load BEFORE main script) -->
    <script src="network_animation.js"></script>
    <script src="background_lists.js"></script>
    <!-- Main animation script -->
    <script src="script.js"></script>
</body>
</html>